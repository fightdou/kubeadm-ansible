---
- name: 创建 charts 目录
  file:
    name: "{{ charts_dir }}"
    state: directory

- import_tasks: set-ceph-vars.yaml
  run_once: True
  delegate_to: "localhost"

- import_tasks: get-run-node-info.yaml
  when:
  - inventory_hostname in groups['allnodes']

- import_tasks: ceph-rbd-csi-install.yaml
  when: 
    - ceph.install_ceph_rbd_csi | bool
  run_once: True
  delegate_to: "localhost"

- import_tasks: ceph-cephfs-csi-install.yaml
  when: 
    - ceph.install_ceph_cephfs_csi | bool
  run_once: True
  delegate_to: "localhost"

- import_tasks: mariadb-install.yaml
  run_once: True
  delegate_to: "localhost"

- import_tasks: libvirt-install.yaml
  run_once: True
  delegate_to: "localhost"

- import_tasks: trochilus-install.yaml
  run_once: True
  delegate_to: "localhost"

- import_tasks: efk-install.yaml
  run_once: True
  delegate_to: "localhost"
